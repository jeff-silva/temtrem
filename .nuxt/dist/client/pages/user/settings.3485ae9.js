(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{197:function(e,t,r){var content=r(200);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(42).default)("113bd0ac",content,!0,{sourceMap:!1})},198:function(e,t,r){var content=r(202);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(42).default)("4378e08c",content,!0,{sourceMap:!1})},199:function(e,t,r){"use strict";var o=r(197);r.n(o).a},200:function(e,t,r){(t=r(41)(!1)).push([e.i,".ui-address .leaflet-pane{z-index:1!important}",""]),e.exports=t},201:function(e,t,r){"use strict";var o=r(198);r.n(o).a},202:function(e,t,r){(t=r(41)(!1)).push([e.i,".ui-modal{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.2);z-index:99;display:flex;align-items:center;justify-content:center}.ui-modal .card{width:600px;max-width:90%!important}",""]),e.exports=t},203:function(e,t,r){"use strict";r.r(t);r(84);var o={props:{value:{default:""},label:{default:""},placeholder:{default:""},type:{default:"text"},imgMaxWidth:{default:800},imgMaxHeight:{default:600},error:{default:""}},watch:{$props:{deep:!0,handler:function(e){this.props=Object.assign({},e)}}},methods:{emit:function(){this.$emit("input",this.props.value),this.$emit("value",this.props.value),this.$emit("change",this.props.value)},getInputPhoto:function(e){var t=this;if(e.target.files&&e.target.files[0]){var r=e.target.files[0];if("image"!=r.type.split("/")[0])return void alert("O arquivo deve ser uma imagem.");var o=new FileReader;o.onload=function(e){var img=document.createElement("img");img.src=e.target.result,img.onload=function(){var canvas=document.createElement("canvas"),e=canvas.getContext("2d"),r=parseFloat(t.imgMaxWidth),o=parseFloat(t.imgMaxHeight),l=img.width,n=img.height;l>n?l>r&&(n*=r/l,l=r):n>o&&(l*=o/n,n=o),canvas.width=l,canvas.height=n,e.drawImage(img,0,0,l,n);var c=canvas.toDataURL("image/png");t.props.value=c,t.emit()}},o.readAsDataURL(r)}}},data:function(){return{props:Object.assign({},this.$props)}}},l=r(9),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-3 p-2"},[r("div",[e._v(e._s(e.label))])]),e._v(" "),r("div",{staticClass:"col-12 col-md-9"},[e.$slots.field?[e._t("field")]:"select"==e.type?[e._v("\r\n                Select\r\n            ")]:"photo"==e.type?[r("label",{staticClass:"d-flex align-items-center"},[r("div",{staticClass:"bg-white shadow-sm"},[r("div",{staticStyle:{display:"inline-block","min-width":"70px",height:"70px"}},[r("img",{staticStyle:{height:"100%"},attrs:{src:e.props.value,alt:""}})]),e._v(" "),r("input",{staticClass:"form-control",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:function(t){return e.getInputPhoto(t)}}})]),e._v(" "),r("div",{staticClass:"flex-grow-1 pl-3"},[r("div",{staticClass:"list-inline"},[e.props.value?r("a",{staticClass:"list-inline-item",attrs:{href:"javascript:;"},on:{click:function(t){e.props.value="",e.emit()}}},[e._v("Remover")]):e._e()])])])]:["checkbox"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value,expression:"props.value"}],staticClass:"form-control",attrs:{placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.props.value)?e._i(e.props.value,null)>-1:e.props.value},on:{keyup:function(t){return e.emit()},change:function(t){var r=e.props.value,o=t.target,l=!!o.checked;if(Array.isArray(r)){var n=e._i(r,null);o.checked?n<0&&e.$set(e.props,"value",r.concat([null])):n>-1&&e.$set(e.props,"value",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.props,"value",l)}}}):"radio"===e.type?r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value,expression:"props.value"}],staticClass:"form-control",attrs:{placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.props.value,null)},on:{keyup:function(t){return e.emit()},change:function(t){return e.$set(e.props,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value,expression:"props.value"}],staticClass:"form-control",attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.props.value},on:{keyup:function(t){return e.emit()},input:function(t){t.target.composing||e.$set(e.props,"value",t.target.value)}}})],e._v(" "),e.props.error?r("small",{staticClass:"d-block text-danger",domProps:{innerHTML:e._s(e.props.error)}}):e._e(),e._v(" "),e.$slots.hint?r("small",{staticClass:"text-muted"},[e._t("hint")],2):e._e()],2)])])}),[],!1,null,null,null);t.default=component.exports},204:function(e,t,r){"use strict";r.r(t);var o={props:{value:{default:!1}},watch:{$props:{deep:!0,handler:function(e){this.props=Object.assign({},e)}}},computed:{meter:function(){var e=this.props.value,t=0,r="danger";if(e){for(var o=new Object,i=0;i<e.length;i++)o[e[i]]=(o[e[i]]||0)+1,t+=5/o[e[i]];var l={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)},n=0;for(var c in l)n+=1==l[c]?1:0;t+=10*(n-1),(t=parseInt(t))>=70?r="success":t>=40&&(r="primary")}return{score:t,class:r}}},methods:{emit:function(){this.$emit("input",this.props.value),this.$emit("value",this.props.value),this.$emit("change",this.props.value)}},data:function(){return{props:Object.assign({},this.$props)}}},l=r(9),component=Object(l.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"progress",staticStyle:{height:"5px"}},[t("div",{staticClass:"progress-bar progress-bar-striped",class:"bg-"+this.meter.class,style:"width:"+this.meter.score+"%;"})])])}),[],!1,null,null,null);t.default=component.exports},205:function(e,t,r){"use strict";r.r(t);var o={props:{reference:{default:""},refId:{default:""},value:{default:function(){return[]}}},components:{"ui-modal":function(){return Promise.resolve().then(r.bind(null,207))},"ui-address":function(){return Promise.resolve().then(r.bind(null,206))}},methods:{listAddresses:function(){var e=this,t={ref:this.reference,ref_id:this.refId};this.$axios.get("/api/address/search",{params:t}).then((function(t){e.props.value=t.data}))}},data:function(){return{props:Object.assign({},this.$props),edit:!1}},mounted:function(){this.listAddresses()}},l=r(9),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-addresses"},[r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(t){return e.props.value.push({})}}},[r("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" Adicionar endereço\r\n    ")]),e._v(" "),0==e.props.value.length?r("div",{staticClass:"text-center text-muted p-3"},[e._v("\r\n        Nenhum endereço cadastrado\r\n    ")]):e._e(),e._v(" "),r("table",{staticClass:"table table-borderless table-striped"},[r("tbody",e._l(e.props.value,(function(t){return r("tr",{on:{click:function(r){e.edit=t}}},[r("td",{staticStyle:{cursor:"pointer"}},[r("strong",{staticClass:"d-block"},[e._v(e._s(t.name||"Sem descrição"))]),e._v(" "),r("small",{staticClass:"d-block text-muted"},[e._v(e._s([t.route,t.district,t.city].join(" ")))])])])})),0)]),e._v(" "),r("ui-modal",{scopedSlots:e._u([{key:"body",fn:function(){return[r("ui-address",{ref:"edit",attrs:{reference:e.reference,"ref-id":e.refId,"show-btn-save":!1},on:{saved:function(t){e.edit=!1,e.listAddresses()}},model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}})]},proxy:!0},{key:"footer",fn:function(){return[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.$refs.edit.save()}}},[r("i",{staticClass:"fa fa-fw fa-save"}),e._v(" Salvar\r\n            ")])]},proxy:!0}]),model:{value:e.edit,callback:function(t){e.edit=t},expression:"edit"}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{UiAddress:r(206).default,UiModal:r(207).default})},206:function(e,t,r){"use strict";r.r(t);r(121);var o={props:{value:{default:function(){return{}}},reference:{default:""},refId:{default:""},showBtnSave:{default:!0}},methods:{save:function(){var e=this;this.$axios.post("/api/address/save",this.props.value).then((function(t){e.$emit("saved",t)}))},autocomplete:function(){var e=this;this.autocompleteTimeout&&clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=setTimeout((function(){e.$axios.get("https://nominatim.openstreetmap.org/search",{params:e.search.params}).then((function(t){e.search.results=t.data}))}),1e3)},selectPlace:function(e){this.$set(this.props,"value",Object.assign(this.props.value,{lat:e.lat?parseFloat(e.lat):0,lng:e.lon?parseFloat(e.lon):0,route:e.address.road,number:"",complement:"",zipcode:e.address.postcode,district:e.address.suburb,city:e.address.city,state:e.address.state,st:"",country:e.address.country,co:e.address.country_code.toUpperCase()})),this.$set(this.search.params,"q",""),this.$set(this.search,"results",[]),this.$emit("input",this.props.value),this.$emit("value",this.props.value),this.$emit("change",this.props.value)},getAddressByLatLng:function(e){var t=this,r={format:"json",lat:e.target._latlng.lat,lon:e.target._latlng.lng,zoom:18,addressdetails:1};this.$axios.get("https://nominatim.openstreetmap.org/reverse",{params:r}).then((function(e){t.selectPlace(e.data)}))}},data:function(){var data={};return data.props=Object.assign({},this.$props),data.props.value=Object.assign({id:"",name:"",ref:this.reference,ref_id:this.refId,lat:0,lng:0,route:"",number:"",complement:"",zipcode:"",district:"",city:"",state:"",st:"",country:"",co:""},data.props.value),data.search={params:{q:"",format:"json",addressdetails:1},results:[]},data}},l=(r(199),r(9)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ui-address"},[r("l-map",{staticStyle:{height:"200px"},attrs:{zoom:16,center:[e.props.value.lat||0,e.props.value.lng||0]}},[r("l-tile-layer",{attrs:{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}}),e._v(" "),r("l-marker",{attrs:{"lat-lng":[e.props.value.lat||0,e.props.value.lng||0],draggable:!0},on:{moveend:function(t){return e.getAddressByLatLng(t)}}})],1),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 pb-3"},[r("small",{staticClass:"d-block bg-dark text-white p-2"},[e.props.value.route?r("span",[e._v(e._s(e.props.value.route)+", ")]):e._e(),e._v(" "),e.props.value.number?r("span",[e._v("Nº "+e._s(e.props.value.number)+", ")]):e._e(),e._v(" "),e.props.value.zipcode?r("span",[e._v("CEP "+e._s(e.props.value.zipcode)+", ")]):e._e(),e._v(" "),e.props.value.district?r("span",[e._v(e._s(e.props.value.district))]):e._e(),e._v(" "),e.props.value.city?r("span",[e._v("- "+e._s(e.props.value.city))]):e._e(),e._v(" "),e.props.value.state?r("span",[e._v(e._s(e.props.value.state))]):e._e()])]),e._v(" "),r("div",{staticClass:"col-12 pb-1"},[r("div",{staticClass:"input-group",staticStyle:{position:"relative","max-width":"500px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search.params.q,expression:"search.params.q"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar endereço"},domProps:{value:e.search.params.q},on:{keyup:function(t){return e.autocomplete()},input:function(t){t.target.composing||e.$set(e.search.params,"q",t.target.value)}}}),e._v(" "),e._m(0),e._v(" "),r("div",{staticClass:"shadow-sm bg-white",staticStyle:{position:"absolute",top:"100%",left:"0px",width:"100%","max-height":"50vh",overflow:"auto","z-index":"2"}},e._l(e.search.results,(function(t){return r("a",{key:t.place_id,staticClass:"p-2 d-block",attrs:{href:"javascript:;"},on:{click:function(r){return e.selectPlace(t)}}},[e._v("\r\n                        "+e._s(t.address.road)+", "+e._s(t.address.suburb)+", "+e._s(t.address.city)+", "+e._s(t.address.state)+"/"+e._s(t.address.country_code.toUpperCase())+"\r\n                    ")])})),0)])]),e._v(" "),r("div",{staticClass:"col-12 pb-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value.name,expression:"props.value.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Descrição Ex.: Endereço principal, secundário, etc."},domProps:{value:e.props.value.name},on:{input:function(t){t.target.composing||e.$set(e.props.value,"name",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-8 pb-1"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value.complement,expression:"props.value.complement"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Complemento"},domProps:{value:e.props.value.complement},on:{input:function(t){t.target.composing||e.$set(e.props.value,"complement",t.target.value)}}})]),e._v(" "),r("div",{staticClass:"col-4 pb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.props.value.number,expression:"props.value.number"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Número"},domProps:{value:e.props.value.number},on:{input:function(t){t.target.composing||e.$set(e.props.value,"number",t.target.value)}}})]),e._v(" "),e.showBtnSave?r("div",{staticClass:"col-12 text-right"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){return e.save()}}},[r("i",{staticClass:"fa fa-fw fa-save"}),e._v(" Salvar\r\n            ")])]):e._e()])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"input-group-append input-group-text"},[t("i",{staticClass:"fa fa-fw fa-search"})])}],!1,null,null,null);t.default=component.exports},207:function(e,t,r){"use strict";r.r(t);var o={props:{value:{default:!1}},watch:{$props:{deep:!0,handler:function(e){this.props=Object.assign({},e)}}},methods:{emit:function(){this.$emit("input",this.props.value),this.$emit("value",this.props.value),this.$emit("change",this.props.value)},toggle:function(){this.props.value=!this.props.value}},data:function(){return{props:Object.assign({},this.$props)}}},l=(r(201),r(9)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.props.value?r("div",{staticClass:"ui-modal",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.props.value=!1,e.emit()}}},[r("div",{staticClass:"card"},[e.$slots.header?r("div",{staticClass:"card-header"},[e._t("header")],2):e._e(),e._v(" "),r("div",{staticClass:"card-body",staticStyle:{"max-height":"80vh",overflow:"auto"}},[e._t("body")],2),e._v(" "),r("div",{staticClass:"card-footer text-right"},[r("button",{staticClass:"btn pull-left",attrs:{type:"button"},on:{click:function(t){e.props.value=!1,e.emit()}}},[e._v("\r\n                Ok\r\n            ")]),e._v(" "),e._t("footer")],2)])]):e._e()}),[],!1,null,null,null);t.default=component.exports},215:function(e,t,r){"use strict";r.r(t);var o={layout:"admin",middleware:"auth",computed:{},methods:{userSave:function(){this.$axios.post("/api/auth/save-me/",this.user).then((function(e){location.reload()}))}},data:function(){return{user:{},addresses:{}}},mounted:function(){var e=this;this.$store.watch((function(t){e.user=Object.assign({},t.auth.user)}),(function(){}),{deep:!0})}},l=r(9),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.userSave()}}},[r("fieldset",[r("legend",[e._v("Meus dados")]),e._v(" "),r("ui-field",e._b({attrs:{type:"photo",label:"Foto",placeholder:"Foto"},model:{value:e.user.photo,callback:function(t){e.$set(e.user,"photo",t)},expression:"user.photo"}},"ui-field",{imgMaxWidth:400,imgMaxHeight:400},!1)),e._v(" "),r("ui-field",{attrs:{type:"text",label:"Nome",placeholder:"Seu nome"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),e._v(" "),r("ui-field",{attrs:{type:"email",label:"Email",placeholder:"nome@grr.la"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}),e._v(" "),r("ui-field",{attrs:{type:"password",label:"Senha",placeholder:"123456"},scopedSlots:e._u([{key:"hint",fn:function(){return[e._v("Sua senha será alterada caso você preencha estes campos.")]},proxy:!0},{key:"field",fn:function(){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Senha"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e._v(" "),r("ui-password-meter",{staticClass:"mt-1",model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),e._v(" "),r("div",{staticClass:"col-6"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password2,expression:"user.password2"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Repita a senha"},domProps:{value:e.user.password2},on:{input:function(t){t.target.composing||e.$set(e.user,"password2",t.target.value)}}})])])]},proxy:!0}]),model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),e._v(" "),e._m(0)],1)]),e._v(" "),r("hr"),e._v(" "),r("fieldset",[r("legend",[e._v("Meus endereços")]),e._v(" "),r("ui-addresses",{attrs:{reference:"users","ref-id":e.$store.state.auth.user.id}})],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"text-right"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t("i",{staticClass:"fa fa-fw fa-save"}),this._v(" Salvar\r\n                ")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{UiField:r(203).default,UiPasswordMeter:r(204).default,UiAddresses:r(205).default})}}]);