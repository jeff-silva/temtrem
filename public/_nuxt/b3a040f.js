(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{783:function(t,e,o){"use strict";o.r(e);o(21);var r={name:"ui-photo",props:{value:{default:""},defaultImage:{default:"data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjYyMS4xMjdweCIgaGVpZ2h0PSI2MjEuMTI3cHgiIHZpZXdCb3g9Ijg5LjQzNyAtMTAuNTYzIDYyMS4xMjcgNjIxLjEyNyINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyA4OS40MzcgLTEwLjU2MyA2MjEuMTI3IDYyMS4xMjciIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KCTxyZWN0IHg9IjEwOS40MzciIHk9IjEwIiBmaWxsPSIjREFEQkRDIiB3aWR0aD0iNTgxLjEyNyIgaGVpZ2h0PSI1ODAuNTYyIi8+DQoJPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUuMDAwMDAwLCAtNS4wMDAwMDApIj4NCgkJPHBhdGggZmlsbD0iI0YzRjRGNCIgZD0iTTk0LjQzNy01LjU2M2g2MjEuMTI3djYyMS4xMjdIOTQuNDM3Vi01LjU2M0w5NC40MzctNS41NjN6IE00NzUuMzQ2LDI1NC4wNTdsLTguMTg1LTQ3LjgzMUwyOTkuNjMsMjM1LjY0MQ0KCQkJbDI0LjU1MywxMzkuOTA4bDE2LjYyNy0yLjgxM3YxMi4wMjFoMTcwLjA4N1YyNTQuMDU3SDQ3NS4zNDZMNDc1LjM0NiwyNTQuMDU3eiBNMzQwLjgxMSwzNTguNjY2bC01LjM3MSwxLjAyMWwtMTkuOTUtMTEyLjc5NA0KCQkJbDE0MC40MTktMjQuODEybDUuNjI4LDMxLjk3NEgzNDAuODExVjM1OC42NjZMMzQwLjgxMSwzNTguNjY2TDM0MC44MTEsMzU4LjY2NnogTTQ5Ny4wODcsMzcwLjk0M0gzNTQuNjIxVjI2Ny44NjhoMTQyLjQ2NlYzNzAuOTQzDQoJCQlMNDk3LjA4NywzNzAuOTQzeiBNMzYzLjgyOCwyNzcuMDc1djc2LjQ3NGwyOC45MDMtMTkuMTgxbDE3LjkwMywxMS4yNTJsNDMuNDgtNDcuODI5bDUuNjI5LDIuMzAxbDI4LjEzNCwzMi40ODV2LTU1LjUwMkgzNjMuODI4DQoJCQlMMzYzLjgyOCwyNzcuMDc1TDM2My44MjgsMjc3LjA3NXogTTM5MS40NTEsMzEwLjA2OGMtNi42NDgsMC0xMi4yNzYtNS42MjYtMTIuMjc2LTEyLjI3N2MwLTYuNjUsNS42MjgtMTIuMjc5LDEyLjI3Ni0xMi4yNzkNCgkJCWM2LjY1MSwwLDEyLjI3Niw1LjYyNiwxMi4yNzYsMTIuMjc5QzQwMy43MjksMzA0LjQ0MiwzOTguMTAyLDMxMC4wNjgsMzkxLjQ1MSwzMTAuMDY4TDM5MS40NTEsMzEwLjA2OEwzOTEuNDUxLDMxMC4wNjh6Ii8+DQoJPC9nPg0KPC9zdmc+DQo="}},watch:{$props:{deep:!0,handler:function(t){this.props=Object.assign({},t)}}},computed:{compUrl:function(){return this.props.value||this.defaultImage}},methods:{emit:function(){this.$emit("input",this.props.value)},fileBrowser:function(){var t=this;Object.assign(document.createElement("input"),{type:"file",accept:"image/x-png,image/gif,image/jpeg",onchange:function(e){t.doUpload(e.target.files[0])}}).click()},doUpload:function(t){var e=this;this.progress=0,this.error="";var data=new FormData;data.append("file",t,t.name),this.$axios.post("/api/upload",data,{onUploadProgress:function(t){e.running=!0,e.progress=Math.round(100*t.loaded/t.total)}}).then((function(t){e.running=!1,e.progress=100,e.props.value=t.data.url,e.$emit("input",e.props.value)})).catch((function(t){e.running=!1,e.progress=0,e.error=t.response.data.message||"Erro"}))},toggle:function(){this.$refs.modal.toggle()},getFile:function(t){var e=this;if(t){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){e.props.value=o.result,e.$emit("input",e.props.value)}}}},data:function(){return{progress:0,running:!1,error:"",modal:!1,props:Object.assign({},this.$props)}}},n=o(5),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"ui-photo",attrs:{dropzone:"copy"},on:{drop:function(e){return t.onDrop(e)},dragover:function(t){return t.preventDefault()}}},[o("div",{staticClass:"d-flex align-items-center"},[o("div",{staticClass:"mr-3 p-2",staticStyle:{width:"80px"}},[o("img",{staticStyle:{width:"100%"},attrs:{src:t.props.value||t.defaultImage,alt:""}})]),t._v(" "),t.props.value?t._e():o("div",[o("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.fileBrowser()}}},[t._v("Fazer upload")]),t._v(" ou\r\n            "),o("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.modal=!0}}},[t._v("informar URL")]),t._v(" "),o("div",{staticClass:"text-danger",domProps:{innerHTML:t._s(t.error)}})]),t._v(" "),t.props.value?o("div",[o("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.props.value="",t.emit()}}},[t._v("Remover")])]):t._e()]),t._v(" "),o("ui-modal",{scopedSlots:t._u([{key:"body",fn:function(){return[o("div",{staticClass:"form-group"},[o("label",[t._v("URL")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.props.value,expression:"props.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.props.value},on:{input:function(e){e.target.composing||t.$set(t.props,"value",e.target.value)}}})])]},proxy:!0},{key:"footer",fn:function(){return[o("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.emit(),t.modal=!1}}},[t._v("\r\n                Ok\r\n            ")])]},proxy:!0}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UiModal:o(408).default})}}]);